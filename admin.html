<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<style>
body{
  font-family:Arial,sans-serif;
  background:#f2f2f2;
}
.box{
  max-width:400px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
h2{text-align:center}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:15px;
}
button{
  background:#e53935;
  color:#fff;
  border:none;
  border-radius:6px;
}
.msg{
  margin-top:10px;
  font-weight:bold;
  text-align:center;
}
</style>
</head>

<body>

<div class="box">
  <h2>üëë ADMIN</h2>

  <input id="uid" placeholder="UID kh√°ch h√†ng">
  <input id="money" type="number" placeholder="S·ªë ti·ªÅn c·∫ßn n·∫°p">

  <button onclick="nap()">N·∫°p ti·ªÅn</button>

  <div id="msg" class="msg"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore,doc,updateDoc,increment } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

/* üî• FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyBK7H8ahk0iOdairoKTYuW6XpXBVTCqUhI",
  authDomain: "wed-mua-the-cao.firebaseapp.com",
  projectId: "wed-mua-the-cao",
  storageBucket: "wed-mua-the-cao.firebasestorage.app",
  messagingSenderId: "893033343634",
  appId: "1:893033343634:web:3627977a944a87ea60d44b"
};

const ADMIN_UID = "yvNHytzlbwOc3kYERIbyPH3GUup1";

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

onAuthStateChanged(auth,(u)=>{
  if(!u || u.uid !== ADMIN_UID){
    alert("Kh√¥ng c√≥ quy·ªÅn admin");
    location.href="index.html";
  }
});

window.nap = async()=>{
  try{
    await updateDoc(doc(db,"users",uid.value),{
      balance: increment(Number(money.value))
    });
    msg.innerText="‚úÖ N·∫°p ti·ªÅn th√†nh c√¥ng";
    msg.style.color="green";
  }catch(e){
    msg.innerText="‚ùå L·ªói n·∫°p ti·ªÅn";
    msg.style.color="red";
  }
};
</script>

</body>
</html>
